<html><head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
	<title>webRTCのテスト</title>
</head><body style="margin: 0; overflow: hidden;">
	<video id="localVideo" width="400" height="300" autoplay="1" ></video>
	<video id="remoteVideo" width="400" height="300" autoplay="1" ></video>
	<script type="text/javascript" src="https://cdn.webrtc.ecl.ntt.com/skyway-latest.js"></script>
	<script type="text/javascript" src="./key.js"></script>
	<script type="text/javascript">
"use strict";

// ----------------------------------------------------------------
// ----------------------------------------------------------------
// ----------------------------------------------------------------

// 処理はここから始まる
document.addEventListener("DOMContentLoaded", event => {
// 	navigator.mediaDevices.getUserMedia({
// 		video: true,
// 		audio: false,
// 	}).then(stream => {
// 	});

	const peer = new Peer({
		key: window.__SKYWAY_KEY__,
		debug: 3,
	});
	
	setTimeout(() => {
		peer.on("open", () => {console.log("peer open", peer);});
		peer.on("error", error => {console.log("peer erropr", error);});
		peer.on("close", () => {console.log("peer close");});
		peer.on("disconnected", () => {console.log("peer disconnected");});
		peer.on("connection", dataConnection => {console.log("peer connection", dataConnection, peer);});
	
		const dataConnection = peer.connect("peerId");
		dataConnection.once("open", () => {console.log("dataConnection open");});
		dataConnection.on("data", data => {console.log("dataConnection data", data);});
		dataConnection.once("close", () => {console.log("dataConnection close");});
	}, 3000);
});

// ----------------------------------------------------------------
// ----------------------------------------------------------------
// ----------------------------------------------------------------
	</script>
</body></html>